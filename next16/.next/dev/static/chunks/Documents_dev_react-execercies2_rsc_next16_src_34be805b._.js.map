{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/query.tsx"],"sourcesContent":["'use client'\n\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\"\nimport { ReactNode } from \"react\"\n\nconst queryClient = new QueryClient()\n\ntype Props = {\n  children: ReactNode\n}\n\nexport function QueryProdiver({ children }: Props) {\n  return (\n    <QueryClientProvider client={queryClient} >\n      {children}\n    </QueryClientProvider>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAKA,MAAM,cAAc,IAAI,qUAAW;AAM5B,SAAS,cAAc,EAAE,QAAQ,EAAS;IAC/C,qBACE,yXAAC,6WAAmB;QAAC,QAAQ;kBAC1B;;;;;;AAGP;KANgB","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/cart/clientFunctions.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport { ProductModel } from \"../products/declaration\";\n\nexport function useGetProduct(productId: number) {\n  return useQuery({\n    queryKey: ['product', productId],\n    queryFn: async () => {\n      const data = await fetch(`http://localhost:3000/products/${productId}`)\n      if (!data.ok) {\n        throw new Error(\"Failed to load a product\")\n      }\n      return await data.json() as ProductModel\n    }\n  })\n}"],"names":[],"mappings":";;;;AAAA;;;AAGO,SAAS,cAAc,SAAiB;;IAC7C,OAAO,IAAA,uVAAQ,EAAC;QACd,UAAU;YAAC;YAAW;SAAU;QAChC,OAAO;sCAAE;gBACP,MAAM,OAAO,MAAM,MAAM,CAAC,+BAA+B,EAAE,WAAW;gBACtE,IAAI,CAAC,KAAK,EAAE,EAAE;oBACZ,MAAM,IAAI,MAAM;gBAClB;gBACA,OAAO,MAAM,KAAK,IAAI;YACxB;;IACF;AACF;GAXgB;;QACP,uVAAQ","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_summary/OrderedProduct.tsx"],"sourcesContent":["import { useGetProduct } from \"@/src/services/cart/clientFunctions\"\nimport { CartProduct } from \"@/src/services/cart/declaration\"\n\ntype OrderedProductProps = {\n  cartProduct: CartProduct\n}\n\nexport function OrderedProduct({ cartProduct }: OrderedProductProps) {\n  const { isSuccess, isLoading, data: product } = useGetProduct(cartProduct.productId)\n\n  if (isLoading) {\n    return <p>Loading product</p>\n  }\n\n  if (!isSuccess) {\n    return null\n  }\n\n  return <article><p>{product.title} - {cartProduct.quantity}</p></article>\n}"],"names":[],"mappings":";;;;;AAAA;;;;AAOO,SAAS,eAAe,EAAE,WAAW,EAAuB;;IACjE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,2NAAa,EAAC,YAAY,SAAS;IAEnF,IAAI,WAAW;QACb,qBAAO,yXAAC;sBAAE;;;;;;IACZ;IAEA,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,qBAAO,yXAAC;kBAAQ,cAAA,yXAAC;;gBAAG,QAAQ,KAAK;gBAAC;gBAAI,YAAY,QAAQ;;;;;;;;;;;;AAC5D;GAZgB;;QACkC,2NAAa;;;KAD/C","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_summary/OrderedProducts.tsx"],"sourcesContent":["\"use client\"\n\nimport { OrderedProduct } from \"./OrderedProduct\"\nimport { QueryProdiver } from \"@/src/services/query\"\nimport { CartModel } from \"@/src/services/cart/declaration\"\nimport { use, useEffect } from \"react\"\n\ntype ProductsProps = {\n  cartPromise: Promise<CartModel>\n}\n\nexport function OrderedProducts({ cartPromise }: ProductsProps) {\n  const cart = use(cartPromise)\n\n  console.log(JSON.stringify(cart.products, null, 2))\n  return (\n    <QueryProdiver>\n      <ul>\n        {cart.products.map(product => (\n          <li key={product.productId}>\n            <OrderedProduct cartProduct={product} />\n          </li>\n        ))}\n      </ul>\n    </QueryProdiver >\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAWO,SAAS,gBAAgB,EAAE,WAAW,EAAiB;IAC5D,MAAM,OAAO,IAAA,gWAAG,EAAC;IAEjB,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,KAAK,QAAQ,EAAE,MAAM;IAChD,qBACE,yXAAC,0MAAa;kBACZ,cAAA,yXAAC;sBACE,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAA,wBACjB,yXAAC;8BACC,cAAA,yXAAC,2NAAc;wBAAC,aAAa;;;;;;mBADtB,QAAQ,SAAS;;;;;;;;;;;;;;;AAOpC;KAfgB","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/components/Button.tsx"],"sourcesContent":["import { ark } from \"@ark-ui/react\"\nimport { MouseEventHandler, ReactNode } from \"react\"\n\ntype ButtonProps = {\n  onClick: MouseEventHandler<HTMLButtonElement>\n  children: ReactNode\n}\n\nexport function Button({ onClick, children }: ButtonProps) {\n  const base = \"m-1 bg-white border border-gray-300 rounded px-4 py-2\"\n  const hover = \"hover:bg-gray-100 hover:translate-y-[1px] hover:shadow-sm\"\n  const active = \"active:translate-y-[1px]\"\n  return <ark.button className={`${base} ${hover} ${active}`} onClick={onClick}>{children}</ark.button>\n\n}"],"names":[],"mappings":";;;;;AAAA;;;AAQO,SAAS,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAe;IACvD,MAAM,OAAO;IACb,MAAM,QAAQ;IACd,MAAM,SAAS;IACf,qBAAO,yXAAC,yVAAG,CAAC,MAAM;QAAC,WAAW,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,QAAQ;QAAE,SAAS;kBAAU;;;;;;AAEjF;KANgB","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/cart/serverFunctions.ts"],"sourcesContent":["\n'use server'\n\nimport { revalidateTag, updateTag } from \"next/cache\";\nimport { CartModel } from \"./declaration\";\nimport { ProductModel } from \"../products/declaration\";\n\nconst TAG = 'cart'\n\nconst CART_URL = \"http://localhost:3000/carts/1\"\n\nexport async function getCart() {\n  const response = await fetch(CART_URL, { next: { tags: [TAG] }, cache: 'no-store' })\n  if (!response.ok) {\n    throw new Error(\"Failed to addd product\")\n  }\n  const cart = await response.json() as CartModel\n  console.log('******************* GET CART ' + cart.products.length)\n  return cart\n}\n\nexport async function addProductToCart(product: ProductModel) {\n  try {\n    const payload = {\n      products: [\n        {\n          \"productId\": 1,\n          \"quantity\": 4\n        },\n      ]\n    }\n    const response = await fetch(CART_URL, { method: 'PATCH', body: JSON.stringify(payload) })\n    if (!response.ok) {\n      throw new Error(\"Failed to addd product\")\n    }\n  } finally {\n    console.log('******************* ADD PRODUCT')\n    // revalidateTag(TAG, \"max\")\n    updateTag(TAG)\n  }\n}"],"names":[],"mappings":";;;;;;;IAqBsB,mBAAA,WAAA,GAAA,IAAA,8aAAA,EAAA,8CAAA,maAAA,EAAA,KAAA,GAAA,yaAAA,EAAA","debugId":null}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_catalog/AddToCartButton.tsx"],"sourcesContent":["\"use client\"\nimport { Button } from \"../../components/Button\"\nimport { addProductToCart } from \"../../services/cart/serverFunctions\"\nimport { ProductModel } from \"@/src/services/products/declaration\"\n\ntype ProductProps = {\n  product: ProductModel\n}\n\nexport function AddToCartButton({\n  product\n}: ProductProps) {\n  const onAddProduct = async () => {\n    await addProductToCart(product)\n  }\n\n  return (\n    <Button onClick={onAddProduct}>\n      Add to cart\n    </Button>\n  )\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AASO,SAAS,gBAAgB,EAC9B,OAAO,EACM;IACb,MAAM,eAAe;QACnB,MAAM,IAAA,mPAAgB,EAAC;IACzB;IAEA,qBACE,yXAAC,sMAAM;QAAC,SAAS;kBAAc;;;;;;AAInC;KAZgB","debugId":null}}]
}