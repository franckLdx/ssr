{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/query.tsx"],"sourcesContent":["'use client'\n\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\"\nimport { ReactNode } from \"react\"\n\nconst queryClient = new QueryClient()\n\ntype Props = {\n  children: ReactNode\n}\n\nexport function QueryProdiver({ children }: Props) {\n  return (\n    <QueryClientProvider client={queryClient} >\n      {children}\n    </QueryClientProvider>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAKA,MAAM,cAAc,IAAI,kUAAW;AAM5B,SAAS,cAAc,EAAE,QAAQ,EAAS;IAC/C,qBACE,0aAAC,0WAAmB;QAAC,QAAQ;kBAC1B;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/cart/clientFunctions.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport { ProductModel } from \"../products/declaration\";\n\nexport function useGetProduct(productId: number) {\n  return useQuery({\n    queryKey: ['product', productId],\n    queryFn: async () => {\n      const data = await fetch(`https://fakestoreapi.com/products/${productId}`)\n      if (!data.ok) {\n        throw new Error(\"Failed to load a product\")\n      }\n      return await data.json() as ProductModel\n    }\n  })\n}"],"names":[],"mappings":";;;;AAAA;;AAGO,SAAS,cAAc,SAAiB;IAC7C,OAAO,IAAA,oVAAQ,EAAC;QACd,UAAU;YAAC;YAAW;SAAU;QAChC,SAAS;YACP,MAAM,OAAO,MAAM,MAAM,CAAC,kCAAkC,EAAE,WAAW;YACzE,IAAI,CAAC,KAAK,EAAE,EAAE;gBACZ,MAAM,IAAI,MAAM;YAClB;YACA,OAAO,MAAM,KAAK,IAAI;QACxB;IACF;AACF","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_summary/OrderedProduct.tsx"],"sourcesContent":["import { useGetProduct } from \"@/src/services/cart/clientFunctions\"\nimport { CartProduct } from \"@/src/services/cart/declaration\"\n\ntype OrderedProductProps = {\n  cartProduct: CartProduct\n}\n\nexport function OrderedProduct({ cartProduct }: OrderedProductProps) {\n  const { isSuccess, isLoading, data: product } = useGetProduct(cartProduct.productId)\n\n  if (isLoading) {\n    return <p>Loading product</p>\n  }\n\n  if (!isSuccess) {\n    return null\n  }\n\n  return <article><p>{product.title} - {cartProduct.quantity}</p></article>\n}"],"names":[],"mappings":";;;;;AAAA;;;AAOO,SAAS,eAAe,EAAE,WAAW,EAAuB;IACjE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,wNAAa,EAAC,YAAY,SAAS;IAEnF,IAAI,WAAW;QACb,qBAAO,0aAAC;sBAAE;;;;;;IACZ;IAEA,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,qBAAO,0aAAC;kBAAQ,cAAA,0aAAC;;gBAAG,QAAQ,KAAK;gBAAC;gBAAI,YAAY,QAAQ;;;;;;;;;;;;AAC5D","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_summary/OrderedProducts.tsx"],"sourcesContent":["\"use client\"\n\nimport { OrderedProduct } from \"./OrderedProduct\"\nimport { QueryProdiver } from \"@/src/services/query\"\nimport { CartModel } from \"@/src/services/cart/declaration\"\nimport { use, useEffect } from \"react\"\n\ntype ProductsProps = {\n  cartPromise: Promise<CartModel>\n}\n\nexport function OrderedProducts({ cartPromise }: ProductsProps) {\n  const cart = use(cartPromise)\n\n  return (\n    <QueryProdiver>\n      <ul>\n        {cart.products.map(product => (\n          <li key={product.productId}>\n            <OrderedProduct cartProduct={product} />\n          </li>\n        ))}\n      </ul>\n    </QueryProdiver >\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAWO,SAAS,gBAAgB,EAAE,WAAW,EAAiB;IAC5D,MAAM,OAAO,IAAA,wYAAG,EAAC;IAEjB,qBACE,0aAAC,uMAAa;kBACZ,cAAA,0aAAC;sBACE,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAA,wBACjB,0aAAC;8BACC,cAAA,0aAAC,wNAAc;wBAAC,aAAa;;;;;;mBADtB,QAAQ,SAAS;;;;;;;;;;;;;;;AAOpC","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/components/Button.tsx"],"sourcesContent":["import { ark } from \"@ark-ui/react\"\nimport { MouseEventHandler, ReactNode } from \"react\"\n\ntype ButtonProps = {\n  onClick: MouseEventHandler<HTMLButtonElement>\n  children: ReactNode\n}\n\nexport function Button({ onClick, children }: ButtonProps) {\n  const base = \"m-1 bg-white border border-gray-300 rounded px-4 py-2\"\n  const hover = \"hover:bg-gray-100 hover:translate-y-[1px] hover:shadow-sm\"\n  const active = \"active:translate-y-[1px]\"\n  return <ark.button className={`${base} ${hover} ${active}`} onClick={onClick}>{children}</ark.button>\n\n}"],"names":[],"mappings":";;;;;AAAA;;;AAQO,SAAS,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAe;IACvD,MAAM,OAAO;IACb,MAAM,QAAQ;IACd,MAAM,SAAS;IACf,qBAAO,0aAAC,sVAAG,CAAC,MAAM;QAAC,WAAW,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,QAAQ;QAAE,SAAS;kBAAU;;;;;;AAEjF","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/cart/serverFunctions.ts"],"sourcesContent":["\n'use server'\n\nimport { revalidateTag, updateTag } from \"next/cache\";\nimport { CartModel } from \"./declaration\";\nimport { ProductModel } from \"../products/declaration\";\n\nconst TAG = 'cart'\n\nexport async function getCart() {\n  console.log('******************* START GET CART')\n  const response = await fetch('http://localhost:3000/carts/5', { next: { tags: [TAG] }, cache: 'no-store' })\n  if (!response.ok) {\n    throw new Error(\"Failed to addd product\")\n  }\n  const cart = await response.json() as CartModel\n  console.log('******************* STOP GET CART')\n  return cart\n}\n\nexport async function addProductToCart(product: ProductModel) {\n  try {\n    const payload = {\n      id: 5,\n      useid: 3,\n      products: [product]\n    }\n    const response = await fetch('https://fakestoreapi.com/carts/5', { method: 'PUT', body: JSON.stringify(payload) })\n    if (!response.ok) {\n      throw new Error(\"Failed to addd product\")\n    }\n  } finally {\n    console.log('******************* ADD PRODUCT DONE')\n    // revalidateTag(TAG, \"max\")\n    updateTag(TAG)\n  }\n}"],"names":[],"mappings":";;;;;;;IAoBsB,mBAAA,WAAA,GAAA,IAAA,2aAAA,EAAA,8CAAA,gaAAA,EAAA,KAAA,GAAA,saAAA,EAAA","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/app/_catalog/AddToCartButton.tsx"],"sourcesContent":["\"use client\"\nimport { Button } from \"../../components/Button\"\nimport { addProductToCart } from \"../../services/cart/serverFunctions\"\nimport { ProductModel } from \"@/src/services/products/declaration\"\n\ntype ProductProps = {\n  product: ProductModel\n}\n\nexport function AddToCartButton({\n  product\n}: ProductProps) {\n  const onAddProduct = async () => {\n    await addProductToCart(product)\n  }\n\n  return (\n    <Button onClick={onAddProduct}>\n      Add to cart\n    </Button>\n  )\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AASO,SAAS,gBAAgB,EAC9B,OAAO,EACM;IACb,MAAM,eAAe;QACnB,MAAM,IAAA,gPAAgB,EAAC;IACzB;IAEA,qBACE,0aAAC,mMAAM;QAAC,SAAS;kBAAc;;;;;;AAInC","debugId":null}}]
}