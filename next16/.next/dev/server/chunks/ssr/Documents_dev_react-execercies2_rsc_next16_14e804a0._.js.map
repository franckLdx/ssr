{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/src/services/cart/serverFunctions.ts"],"sourcesContent":["\n'use server'\n\nimport { revalidateTag, updateTag } from \"next/cache\";\nimport { CartModel } from \"./declaration\";\nimport { ProductModel } from \"../products/declaration\";\n\nconst TAG = 'cart'\n\nconst CART_URL = \"http://localhost:3000/carts/1\"\n\nexport async function getCart() {\n  console.log('******************* GET CART START')\n  const response = await fetch(CART_URL, { next: { tags: [TAG] }, cache: 'no-store' })\n  if (!response.ok) {\n    throw new Error(\"Failed to addd product\")\n  }\n  const cart = await response.json() as CartModel\n  console.log('******************* GET CART ' + cart.products.length)\n  return cart\n}\n\nexport async function addProductToCart(cartModel: CartModel, product: ProductModel) {\n  try {\n    const payload = {\n      products: [\n        ...cartModel.products,\n        {\n          productId: product.id,\n          quantity: 1\n        }\n      ]\n    }\n    const response = await fetch(CART_URL, { method: 'PATCH', body: JSON.stringify(payload) })\n    if (!response.ok) {\n      throw new Error(\"Failed to addd product\")\n    }\n  } finally {\n    console.log('******************* ADD PRODUCT')\n    // revalidateTag(TAG, \"max\")\n    updateTag(TAG)\n  }\n}"],"names":[],"mappings":";;;;;;;AAGA;;;;AAIA,MAAM,MAAM;AAEZ,MAAM,WAAW;AAEV,eAAe;IACpB,QAAQ,GAAG,CAAC;IACZ,MAAM,WAAW,MAAM,MAAM,UAAU;QAAE,MAAM;YAAE,MAAM;gBAAC;aAAI;QAAC;QAAG,OAAO;IAAW;IAClF,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,QAAQ,GAAG,CAAC,kCAAkC,KAAK,QAAQ,CAAC,MAAM;IAClE,OAAO;AACT;AAEO,eAAe,iBAAiB,SAAoB,EAAE,OAAqB;IAChF,IAAI;QACF,MAAM,UAAU;YACd,UAAU;mBACL,UAAU,QAAQ;gBACrB;oBACE,WAAW,QAAQ,EAAE;oBACrB,UAAU;gBACZ;aACD;QACH;QACA,MAAM,WAAW,MAAM,MAAM,UAAU;YAAE,QAAQ;YAAS,MAAM,KAAK,SAAS,CAAC;QAAS;QACxF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;IACF,SAAU;QACR,QAAQ,GAAG,CAAC;QACZ,4BAA4B;QAC5B,IAAA,sUAAS,EAAC;IACZ;AACF;;;IA/BsB;IAWA;;AAXA,2aAAA;AAWA,2aAAA","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utilisateur/Documents/dev/react-execercies2/rsc/next16/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getCart as '0091a567726e8345dc602905f735fac479ab655080'} from 'ACTIONS_MODULE0'\nexport {addProductToCart as '609edbc6ee905599611aec94834306b373d85e1965'} from 'ACTIONS_MODULE0'\nexport {getProducts as '001c4ffbd73059c8fd65b29671185423d52112df04'} from 'ACTIONS_MODULE1'\nexport {addProductToCart as '609edbc6ee905599611aec94834306b373d85e1965'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA;AAEA","debugId":null}}]
}